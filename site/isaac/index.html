<!DOCTYPE html>
<html>
<head>
  <style type="text/css">
  html,
  body {
      margin: 0;
      overflow: hidden;
      height: 100%;
      background-image: url(img/bg.jpg);
      background-size: cover;
  }
  /* Scale canvas with resize attribute to full size */
  canvas[resize] {
      width: 100%;
      height: 100%;
  }
  </style>

  <script type = "text/javascript" src = "http://paperjs.org/assets/js/paper.js"> </script>
</head>
<body>
  <audio id="isaac">
      <source src="sound/isaac.mp3" type="audio/mp3"></source>
  </audio>
  <audio id="maggy">
      <source src="sound/maggy.mp3" type="audio/mp3"></source>
  </audio>
  <audio id="cain">
      <source src="sound/cain.mp3" type="audio/mp3"></source>
  </audio>
  <audio id="judas">
      <source src="sound/judas.mp3" type="audio/mp3"></source>
  </audio>
  <audio id="blue_baby">
      <source src="sound/blue_baby.mp3" type="audio/mp3"></source>
  </audio>
  <canvas id="canvas-1" hidpi="on" resize = "true" ></canvas>
  <div id="pic"></div>
</body>

<script type= "text/javascript" canvas = "canvas-1" >
</script>

<script type= "text/paperscript" canvas = "canvas-1">

  var count = 0;
  var shape = new Shape.Rectangle({
    point: [view.center.x - 350, view.center.y - 250],
    size: [700, 500],
    fillColor: 'white',
    opacity: 0.7
  });
  var isaac = new Characters("isaac", "img/isaac.png","Isaac", 3, 0, 2, 2);
  var maggy = new Characters("maggy", "img/maggy.png", "Magdalene (Maggy)", 4, 0, 1, 2);
  var cain = new Characters("cain", "img/cain.png", "Cain", 2, 0, 2, 2);
  var judas = new Characters("judas", "img/judas.png", "Judas", 1, 0, 2, 3);
  var blue_baby = new Characters("blue_baby", "img/blue_baby.png", "??? (Blue Baby)", 0, 3, 2, 2);
  var characters = [isaac, maggy, cain, judas, blue_baby];
  var logo = new Raster("img/logo.png", [view.center.x, view.center.y/3]);

  var text = new PointText({
    point: [view.center.x, view.center.y + 300],
    fontFamily: 'Courier New',
    fontWeight: 'bold',
    fontSize: 30,
    content: "Use left and right arrow keys to navigate",
    justification: 'center'
    });

  function Characters(sound, source, name, redHeart, soulHeart, speed, damage) {
    var space = 40;
    this.sound = sound;
    this.setText = function(forContent){
      this.text.content = forContent;
    }
    this.pic = new Raster(source, [view.center.x, view.center.y - 70]);
    this.name = new PointText({
      point: [view.center.x, view.center.y+20],
      fontFamily: 'Courier New',
      fontWeight: 'bold',
      fontSize: 30,
      content: name,
      justification: 'center'
    });
    this.redHeart = redHeart;
    this.soulHeart = soulHeart;
    this.health = new PointText({
      point: [view.center.x - 60, view.center.y+(space*2)],
      fontFamily: 'Courier New',
      fontWeight: 'bold',
      fontSize: 20,
      content: "health : " + redHeart
    });
    this.speed = new PointText({
      point: [view.center.x-60, view.center.y+(space*3)],
      fontFamily: 'Courier New',
      fontWeight: 'bold',
      fontSize: 20,
      content: "speed : " + speed
    });
    this.damage = new PointText({
      point: [view.center.x-60, view.center.y+(space*4)],
      fontFamily: 'Courier New',
      fontWeight: 'bold',
      fontSize: 20,
      content: "damage : " + damage
    });


  }
  var audio = document.getElementById(characters[count % characters.length].sound);

  function updateSource() {
    audio = document.getElementById(characters[count % characters.length].sound);
    audio.play(); //call this to play the song right away
  }

  function setUI() {
    for(var i = 0; i < characters.length; i++) {
      characters[i].pic.visible = false;
      characters[i].name.visible = false;
      characters[i].health.visible = false;
      characters[i].speed.visible = false;
      characters[i].damage.visible = false;
    }

    characters[count % characters.length].pic.visible = true;
    characters[count % characters.length].name.visible = true;
    characters[count % characters.length].health.visible = true;
    characters[count % characters.length].speed.visible = true;
    characters[count % characters.length].damage.visible = true;
    updateSource();
  }
  setUI();

  document.onkeydown = checkKey;

  function checkKey(e){
    e = e || window.event;

    if(e.keyCode =='37') {
      audio.pause();
      if(count <= 0){
        count = characters.length;
      }else{}
      console.log(count);
        count--
      setUI();
    }

    if(e.keyCode =='39') {
      audio.pause();
      count++;
      console.log(count);
      setUI();
    }
  }
  function map(value, start1, stop1, start2, stop2) {
      return start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));
  }
</script>


</html>
