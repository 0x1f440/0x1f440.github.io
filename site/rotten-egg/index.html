
<!DOCTYPE html>
<html>
<head>
  <title>Rotten Eggs :: Hongik!</title>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no">
  <link href="https://fonts.googleapis.com/css?family=Bangers" rel="stylesheet">
  <script type = "text/javascript" src = "https://cdnjs.cloudflare.com/ajax/libs/paper.js/0.11.4/paper-full.min.js"></script>
  <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha256-k2WSCIexGzOj3Euiig+TlR8gA0EmPjuc79OEeY5L45g=" crossorigin="anonymous"></script>
  <script type="text/javascript" src="https://openapi.map.naver.com/openapi/v3/maps.js?clientId=RZrvWOXzFf2fbBQZF2tY"></script>
  <script type="text/javascript" src="https://openapi.map.naver.com/openapi/v3/maps.js?clientId=RZrvWOXzFf2fbBQZF2tY&submodules=geocoder"></script>
  <style>
    * { font-family: 'Spoqa Han Sans', 'Sans-serif'; }

    html, body {
      margin: 0;
      height: 100%;
    }

    #map {
      width: 100%;
      height: calc(100% - 325px);
    }

    #nav {
      width: 100%;
      height: 45px;
      padding: 10px;

      background-color: #ffd500;

      font-family: 'Bangers', cursive;
      font-size: 24px;
      text-align: center;
      color: white;
      text-shadow:
       -1px -1px 0 #000,
        1px -1px 0 #000,
        -1px 1px 0 #000,
         1px 1px 0 #000;

      box-sizing: border-box;
    }

    #standard {
      position: absolute;
      top: 340px;
      left: 20px;

      padding: 5px 10px 10px 10px;

      font-size: 12px;
      vertical-align: middle;

      border: 1px solid #666;
      background-color: rgba(255,255,255,0.8);
    }

    #standard img {
      width: 10px;

      margin: 5px;
    }

    canvas {
      display: block;
      margin: 0 auto;
      width: 100%;
      height: 280px;
      background-color : white;
    }
  </style>
</head>
<body>
  <div id="nav">Rotten Egg Hongik</div>
  <canvas id="canvas-1" resize="true"></canvas>
  <div id="map"></div>
  <div id="standard">
    <img src="img/marker/bad.png">법 위반 음식점<br>
    <img src="img/marker/good.png">모범 음식점
  </div>
  <script type="text/javascript">
    var character
  </script>
  <script type="text/paperscript" canvas="canvas-1">
    var MyCharacterClass = function(){
      this.address = new PointText({
        point:[460,80],
        content:"위치를 찾고 있어요",
        fontSize: 40,
      });
      this.score = new PointText({
        point:[460,260],
        content:"...",
        fontSize: 160,
        fontWeight:500,
        fontFamily: 'Bangers'
      });
      this.text = new PointText({
        point:[460,340],
        content:"이 동네 음식점의 신선지수 평가중입니다...",
        fontSize: 30,
      });

      this.albumen = new Path({
             segments: [[30,40], [150,0], [220,0], [300,70], [320,120], [300,180], [280,240], [200,300], [60,290], [30,250], [-20,180], [0,130]],
             closed: true
         });
      this.albumen.style = {
           fillColor: '#ffd500',
           strokeColor: '#ffd500',
           strokeWidth: 5
         };
      this.albumen.smooth({
           type: 'catmull-rom',
           factor: 0.4
       });
       this.vitellus = new Shape.Circle([150,150], 76);
       this.vitellus.style = {
         fillColor: '#ffd500',
         strokeWidth: 5
       };


       /* 눈 */
       this.sclera = new Shape.Ellipse({
         center: [0, 0],
         radius: [30, 38],
         fillColor: 'white',
         strokeColor: '#efe3e8',
         strokeWidth: 4
       });

       this.iris = new Shape.Circle({
         center: [10, 0],
         radius: 15,
         fillColor: '#661fb4',
         strokeColor: '#220a3c',
         strokeWidth: 4
       });

       this.pupil = new Shape.Circle({
         center: [10, 0],
         radius: 9,
         fillColor: '#220a3c',
       });

       this.highlight = new Shape.Circle({
         center: [15, -8],
         radius: 3,
         fillColor: 'white'
       });
       this.sclera2 = this.sclera.clone();
       this.eyeball = new Group([this.iris, this.pupil, this.highlight]);
       this.eyeball2 = this.eyeball.clone();
       this.eye = new Group([this.sclera, this.eyeball]);
       this.eye_l = new Group([this.sclera2, this.eyeball2]);
       this.eye.position = [193,150];
       this.eye_l.position = [143,150];

       /* 팔 */
       this.arm_origin = new Point(15, 0);
       this.arm_joint = new Point(25, 70);
       this.arm_end = new Point(0, 140);

       this.arm_path = new Path({
           segments: [this.arm_origin, this.arm_joint, this.arm_end],
           closed: false,
           strokeColor: '#222',
           strokeWidth: 20,
       });

       this.arm_path.smooth({
         type: 'continuous'
       });
       this.arm_path.strokeCap = 'round';

       this.arm = new Group([this.arm_path]);
       this.arm.position.y =+ 250;
       this.arm_l = this.arm.clone();
       this.arm_l.position.x -= 20;
       this.arm_l.children[0].pivot = this.arm_l.children[0].segments[0].point;
       this.arm_l.rotate(20);
       this.arm_r = this.arm.clone();
       this.arm_r.position.x += 310;
       this.arm_r.children[0].pivot = this.arm_r.children[0].segments[0].point;
       this.arm_r.position.y -= 80;
       this.arm_r.rotate(50);

       this.arm_r.rotate(-70);
       this.arm_r.position.x -= 15;
       this.arm_r.position.y += 70;
       this.arm_l.rotate(180);
       this.arm_l.position.y -= 5;

       this.arm.visible = false;

       this.arm_l.applyMatrix = false;
       this.arm_r.applyMatrix = false;
       this.eyebrow_l = new Path({
         segments:[[185, 113], [230, 133]],
         closed: false,
         strokeColor: '#0d2428',
         strokeWidth: 14
       });
       this.eyebrow_r = new Path({
         segments:[[110, 133], [155, 113]],
         closed: false,
         strokeColor: '#0d2428',
         strokeWidth: 14
       });

       this.eyebrow = new Group([this.eyebrow_r, this.eyebrow_l]);
       this.eyebrow_r.visible = false;
       this.eyebrow_l.visible = false;

       this.sosobrow_l = new Path({
         segments : [[130, 110], [160, 110]],
         closed : false,
         strokeColor : 'black',
         strokeWidth : 5
       })

       this.sosobrow_r = this.sosobrow_l.clone();
       this.sosobrow_r.position.x += 50;

       this.sosobrow = new Group([this.sosobrow_r, this.sosobrow_l]);

       this.smile = new Path({
         segments : [[140, 186],[165, 200], [190, 186]],
         closed : false,
         strokeColor: 'black',
         strokeWidth: 3
       });

       this.smile.smooth({
           type: 'continuous'
         });
      this.smile.visible = false;
       /* 다리 */
       this.leg_origin = new Point(0, 0);
       this.leg_joint = new Point(10, 40);
       this.leg_end = new Point(0, 80);

       this.socksColor = new Gradient({
           stops: [['#222', 0.15], ['white', 0.15], ['white', 0.25], ['#661fb4', 0.25],
           ['#661fb4', 0.35], ['white', 0.35], ['white', 0.4], ['#661fb4', 0.4], ['#661fb4', 0.5],['white', 0.5]],
           origin: this.leg_joint,
           destination: this.leg_end
       });
       this.socks = new Color(this.socksColor, this.leg_joint, this.leg_end);

       this.leg_path = new Path(this.leg_origin, this.leg_joint, this.leg_end);
       this.leg_path.strokeColor = this.socks;
       this.leg_path.strokeWidth = 25;
       this.leg_path.smooth({
         type: 'continuous'
       });

       this.shoes = new Path({
         segments : [[0,5], [30,5], [25,17], [50,17], [55,35], [0,35]],
         closed: true,

         fillColor: '#692c21',
         strokeColor: '#56241b',
         strokeWidth: 3
       });

       this.shoes.smooth({
           type: 'continuous',
           from: 2,
           to: 4
       });
       this.shoes.rotate(20);
       this.shoes.position.x -= 15;
       this.shoes.position.y += 70;
       this.leg = new Group([this.leg_path, this.shoes]);
       this.leg.position.x =+ 150;
       this.leg.position.y =+ 340;

       this.leg_l = this.leg.clone();
       this.leg_l.position.x -= 40;
       this.leg_l.position.y -= 5;

       this.leg_r = this.leg.clone();
       this.leg_r.position.x += 60;
       this.leg_r.rotate(-20);

       this.leg.visible = false;



       this.egg_body = new Group ([this.albumen, this.vitellus]);
      //this.eye = new Group([this.sclera, this.iris, this.pupil, this.highlight]);
       this.eyes = new Group([this.eye, this.eye_l, this.eyebrow_r, this.eyebrow_l, this.smile]);
       //this.arm = new Group([this.arm_path]);
       this.arms = new Group([this.arm_l, this.arm_r]);
       //this.leg_path = new Path(this.leg_origin, this.leg_joint, this.leg_end);
       //this.leg = new Group([this.leg_path, this.shoes]);
       this.legs = new Group([this.leg_l, this.leg_r]);
       this.character = new Group([this.legs, this.arms, this.egg_body, this.eyes, this.address, this.score, this.text, this.sosobrow]);

       this.character.applyMatrix = false;
       this.character.scale(0.7);
       this.character.position.y -= 60;
       this.character.applyMatrix = false;




       this.sad = function(){

         this.vitellus.fillColor = '#205862';
         //arms
         this.arm_l.strokeColor = 'black';
         this.arm_r.strokeColor = 'black';


         //legs
         this.leg_l.strokeColor = 'black';
         this.leg_r.strokeColor = 'black';

         //shoes
         this.shoes.style = {
           strokeColor : "black",
           fillColor : "black"
         };

         //face
         this.albumen.style = {
           strokeColor : "#2f808e",
           fillColor : "#2f808e"
         };

         //eyes
         this.pupil.style = {
           strokeColor : "black",
           strokeWidth : 3,
           fillColor : "black"
         };

         this.pupil.style = {
           strokeColor : "black",
           strokeWidth : 3,
           fillColor : "black"
         };
         this.address.fillColor = '#9b3359';
         this.text.fillColor = '#9b3359';
         this.score.fillColor = '#9b3359';

         this.eyebrow_r.visible = true;
         this.eyebrow_l.visible = true;

         this.sosobrow.visible = false;
       }
       this.arm.applyMatrix = false;
       this.character.scale(0.7);

       this.normal = function() {
         this.sosobrow.visible = true;

         this.eyebrow_r.visible = false;
         this.eyebrow_l.visible = false;

         this.albumen.fillColor = '#ffd500';
         this.albumen.strokeColor='#ffd500';

         this.score.fillColor = 'black';
         this.address.fillColor = 'black';
         this.text.fillColor = 'black';

         this.arm_l.strokeColor = '#222';
         this.arm_r.strokeColor = '#222';
         this.smile.visible = false;
         this.vitellus.style = {
           fillColor: '#ffd500',
           strokeWidth: 5
         };
      }

      this.happy = function(){
        this.sosobrow.visible = false;
        this.smile.visible = true;

        this.address.fillColor = '#3eb4a7';
        this.text.fillColor = '#3eb4a7';
        this.score.fillColor = '#3eb4a7';

        this.eyebrow_r.visible = false;
        this.eyebrow_l.visible = false;

        this.albumen.style = {
             fillColor: '#fcfcfc',
             strokeColor: '#efefef',
             strokeWidth: 5
           };

        this.albumen.smooth({
             type: 'catmull-rom',
             factor: 0.4
           });

         this.vitellus.style = {
           fillColor: '#ffd500',
           strokeWidth: 5
         };
      }

      this.changeText = function(forContent){
        this.text.content = forContent;
      }
      this.changeAddress = function(forContent){
        this.address.content = forContent;
      }
      this.changescore = function(forContent){
        this.score.content = forContent;
      }
    }
    character = new MyCharacterClass();

    function onResize() {
      character.character.position.x = view.center.x;
    }

    function onFrame() {
      character.albumen.rotate(0.2);
    }

    function onMouseMove(event){
      character.eyeball2.position.x = map(event.point.x, 0, 1200, 135, 150);
      character.eyeball.position.x = map(event.point.x, 0, 1200, 185, 200);
      }

    function map(value, start1, stop1, start2, stop2) {
        return start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));
    }
  </script>
  <script type="text/javascript">
    /* naver map basic api code */
    var startCount = 1;
    var endCount = 300;
    var currentAddress = "default";
    var dongGyo = [];
    var seoGyo = [];
    var mangOne = [];
    var seoGang = [];
    var noGoSan = [];
    var sungSan = [];
    var jung = [];
    var sangAm = [];

    var dongGyoGood = [];
    var seoGyoGood = [];
    var mangOneGood = [];
    var seoGangGood = [];
    var noGoSanGood = [];
    var sungSanGood = [];
    var jungGood = [];
    var sangAmGood = [];

    var area = 0;
    var currentPositionMarker;

    var map = new naver.maps.Map('map', {
      center: new naver.maps.LatLng(37.5666805, 126.9784147),
      zoom: 11,
      mapTypeId: naver.maps.MapTypeId.NORMAL
    });

    var infowindow = new naver.maps.InfoWindow();

    $(window).on("load", function() {
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(onSuccessGeolocation, onErrorGeolocation);
      } else {
        var center = map.getCenter();
        infowindow.setContent('<div style="padding:20px;"><h5 style="margin-bottom:5px;color:#f00;">Geolocation not supported</h5>'+ "latitude: "+ center.lat() +"<br />longitude: "+ center.lng() +'</div>');
        infowindow.open(map, center);
      }
    });

    function onSuccessGeolocation(position) {
      var location = new naver.maps.LatLng(position.coords.latitude, position.coords.longitude);

       map.setCenter(location); // 얻은 좌표를 지도의 중심으로 설정합니다.
       currentPositionMarker = new naver.maps.Marker({
         position: location,
         map: map
       });
       searchCoordinateToAddress(location);

       naver.maps.Event.addListener(map, 'click', function(e) {
         currentPositionMarker.setPosition(e.coord);
         searchCoordinateToAddress(e.coord);
         setScore();
       });
    }

    function onErrorGeolocation() {
        var center = map.getCenter();

        infowindow.setContent('<div style="padding:20px;">' +
            '<h5 style="margin-bottom:5px;color:#f00;">Geolocation failed!</h5>'+ "latitude: "+ center.lat() +"<br />longitude: "+ center.lng() +'</div>');

        infowindow.open(map, center);
    }


    function searchCoordinateToAddress(latlng) {
      var tm128 = naver.maps.TransCoord.fromLatLngToTM128(latlng);

      naver.maps.Service.reverseGeocode({
          location: tm128,
          coordType: naver.maps.Service.CoordType.TM128
      }, function(status, response) {
          if (status === naver.maps.Service.Status.ERROR) {
            return alert('Something Wrong!');
          }

          var items = response.result.items,
            htmlAddresses = [];

          for (var i=0, ii=items.length, item, addrType; i<ii; i++) {
            item = items[i];
            addrType = item.isRoadAddress ? '[도로명 주소]' : '[지번 주소]';
          }
          currentAddress = item.address;
          if(area == 0){
            console.log(area + 'loading!');
            loadBadFoodXML('http://openAPI.mapo.go.kr:8088/67695847446d6573353664736e6d50/xml/MpAdminMesureFood/' + startCount + '/' + endCount + '/');
            loadGoodFoodXML('http://openAPI.mapo.go.kr:8088/67695847446d6573353664736e6d50/xml/MpModelRestaurantDesignate/' + startCount + '/' + endCount + '/');
          }


          character.changeAddress(currentAddress);

          infowindow.setContent(
            '<div style="padding:20px;">' +
            '현위치<br>'+ currentAddress +'</div>');

          infowindow.open(map, latlng);


      });
    }
    function setScore() {
      if(currentAddress.match('동교')){
        area = 1;
        character.changescore(score(dongGyo.length, dongGyoGood.length) + '%');
      }
      else if(currentAddress.match("서교")){
        area = 2;
        character.changescore(score(seoGyo.length, seoGyoGood.length) + '%');
      }
      else if(currentAddress.match("망원")) {
        area = 3;
        character.changescore(score(mangOne.length, mangOneGood.length) + '%');
      }
      else if(currentAddress.match("신수")) {
        area = 4;
        character.changescore(score(seoGang.length, seoGangGood.length) + '%');
      }
      else if(currentAddress.match("노고산")) {
        area = 5;
        character.changescore(score(noGoSan.length, noGoSanGood.length) + '%');
      }
      else if(currentAddress.match("성산")) {
        area = 6;
        character.changescore(score(sungSan.length, sungSanGood.length) + '%');
      }
      else if(currentAddress.match("중동")) {
        area = 7;
        character.changescore(score(jung.length, jungGood.length) + '%');
      }
      else if(currentAddress.match("상암")) {
        area = 8;
        character.changescore(score(sangAm.length, sangAmGood.length) + '%');
      }
      else{
        character.changescore('(\'o\')/');
        character.normal();
        character.changeText('이 지역은 점수가 나오지 않았어요');
      }
    }

    function score(bad, good){
      var score = Math.floor(100/(bad + good) * (good * 1.2));
      console.log(bad + ', ' +  good)

      if(score > 70){
        console.log('happy');
        character.happy();
        character.changeText('모범음식점의 비율이 높네요! 안심하고 드세요');
      }
      else if(score > 40){
        console.log('soso');
        character.normal();
        character.changeText('뭐... 그럭저럭 먹을만은 하네요');
      }
      else {
        console.log('sad');
        character.sad();
        character.changeText('이 동네에서 음식을 먹는다면 조심히 살펴보고 가세요');
      }
      return score;
    }


    // result by latlng coordinate
    function searchAddressToCoordinateAndMark(address, areaName, good) {
        naver.maps.Service.geocode({
            address: address
        }, function(status, response) {
            if (status === naver.maps.Service.Status.ERROR) {
            }
            var item = response.result.items[0],
                addrType = item.isRoadAddress ? '[도로명 주소]' : '[지번 주소]',
                point = new naver.maps.Point(item.point.x, item.point.y);

            areaName[4]= new naver.maps.InfoWindow();
            areaName[4].setContent('<div style="padding:20px;">' + areaName[1] + '</div>');
            if(good == true){
              areaName[3] = new naver.maps.Marker({
                  position: point,
                  map: map,
                  icon: {
                    url: 'img/marker/good.png'
                  }
              });
            }
            else{
              areaName[3] = new naver.maps.Marker({
                  position: point,
                  map: map,
                  icon: {
                    url: 'img/marker/bad.png'
                  }
              });
            }
            naver.maps.Event.addListener(areaName[3], 'click', function(){areaName[4].open(map, point)});
        });
    }

    function loadGoodFoodXML(url)
    {
      var request = new XMLHttpRequest();
      request.open("GET", url, true);
      request.onload = function()
      {
        if(request.readyState == 4)
        {
          if(request.status == 200)
          {
            var temp = request.responseXML;
            var totalCount = temp.getElementsByTagName("list_total_count")[0].childNodes[0].nodeValue;
            var address;

            for(var i = startCount; i < endCount ; i++) {
              address = temp.getElementsByTagName("SITE_ADDR")[i].childNodes[0].nodeValue;
              if(address.match('동교')) {
                dongGyoGood[dongGyoGood.length] = [];
                dongGyoGood[dongGyoGood.length - 1][0] = address;
                dongGyoGood[dongGyoGood.length - 1][1] = temp.getElementsByTagName("UPSO_NM")[i].childNodes[0].nodeValue;
                searchAddressToCoordinateAndMark(dongGyoGood[dongGyoGood.length - 1][0], dongGyoGood[dongGyoGood.length - 1], true);
              }
              if (address.match('서교')) {
                seoGyoGood[seoGyoGood.length] = [];
                seoGyoGood[seoGyoGood.length - 1][0] = address;
                seoGyoGood[seoGyoGood.length - 1][1] = temp.getElementsByTagName("UPSO_NM")[i].childNodes[0].nodeValue;
                searchAddressToCoordinateAndMark(seoGyoGood[seoGyoGood.length - 1][0], seoGyoGood[seoGyoGood.length - 1], true);
              }
              if (address.match('망원')) {
                mangOneGood[mangOneGood.length] = [];
                mangOneGood[mangOneGood.length - 1][0] = address;
                mangOneGood[mangOneGood.length - 1][1] = temp.getElementsByTagName("UPSO_NM")[i].childNodes[0].nodeValue;
                searchAddressToCoordinateAndMark(mangOneGood[mangOneGood.length - 1][0], mangOneGood[mangOneGood.length - 1], true);
              }
              if (address.match('신수')) {
                seoGangGood[seoGangGood.length] = [];
                seoGangGood[seoGangGood.length - 1][0] = address;
                seoGangGood[seoGangGood.length - 1][1] = temp.getElementsByTagName("UPSO_NM")[i].childNodes[0].nodeValue;
                searchAddressToCoordinateAndMark(seoGangGood[seoGangGood.length - 1][0], seoGangGood[seoGangGood.length - 1], true);
              }
              if (address.match('노고산')) {
                noGoSanGood[noGoSanGood.length] = [];
                noGoSanGood[noGoSanGood.length - 1][0] = address;
                noGoSanGood[noGoSanGood.length - 1][1] = temp.getElementsByTagName("UPSO_NM")[i].childNodes[0].nodeValue;
                searchAddressToCoordinateAndMark(noGoSanGood[noGoSanGood.length - 1][0], noGoSanGood[noGoSanGood.length - 1], true);
              }
              if (address.match('성산')) {
                sungSanGood[sungSanGood.length] = [];
                sungSanGood[sungSanGood.length - 1][0] = address;
                sungSanGood[sungSanGood.length - 1][1] = temp.getElementsByTagName("UPSO_NM")[i].childNodes[0].nodeValue;
                searchAddressToCoordinateAndMark(sungSanGood[sungSanGood.length - 1][0], sungSanGood[sungSanGood.length - 1], true);
              }
              if (address.match('중동')) {
                jungGood[jungGood.length] = [];
                jungGood[jungGood.length - 1][0] = address;
                jungGood[jungGood.length - 1][1] = temp.getElementsByTagName("UPSO_NM")[i].childNodes[0].nodeValue;
                searchAddressToCoordinateAndMark(jungGood[jungGood.length - 1][0], jungGood[jungGood.length - 1], true);
              }
              if (address.match('상암')) {
                sangAmGood[sangAmGood.length] = [];
                sangAmGood[sangAmGood.length - 1][0] = address;
                sangAmGood[sangAmGood.length - 1][1] = temp.getElementsByTagName("UPSO_NM")[i].childNodes[0].nodeValue;
                searchAddressToCoordinateAndMark(sangAmGood[sangAmGood.length - 1][0], sangAmGood[sangAmGood.length - 1], true);
              }
            }
          }
        }
      }
      request.send();
    }

    function loadBadFoodXML(url)
    {
      var request = new XMLHttpRequest();
      request.open("GET", url, true);
      request.onload = function()
      {
        if(request.readyState == 4)
        {
          if(request.status == 200)
          {
            var temp = request.responseXML;
            var totalCount = temp.getElementsByTagName("list_total_count")[0].childNodes[0].nodeValue;
            var address;

            for(var i = startCount; i < endCount ; i++) {
              if(temp.getElementsByTagName("DISPO_CTN_DT")[i].childNodes[0].nodeValue.match('폐쇄')) {
                continue;
              }

              address = temp.getElementsByTagName("SITE_ADDR")[i].childNodes[0].nodeValue;
              if(address.match('동교')) {
                dongGyo[dongGyo.length] = [];
                dongGyo[dongGyo.length - 1][0] = address;
                dongGyo[dongGyo.length - 1][1] = temp.getElementsByTagName("UPSO_NM")[i].childNodes[0].nodeValue;
                searchAddressToCoordinateAndMark(dongGyo[dongGyo.length - 1][0], dongGyo[dongGyo.length - 1], false);
              }
              if (address.match('서교')) {
                seoGyo[seoGyo.length] = [];
                seoGyo[seoGyo.length - 1][0] = address;
                seoGyo[seoGyo.length - 1][1] = temp.getElementsByTagName("UPSO_NM")[i].childNodes[0].nodeValue;
                searchAddressToCoordinateAndMark(seoGyo[seoGyo.length - 1][0], seoGyo[seoGyo.length - 1], false);
              }
              if (address.match('망원')) {
                mangOne[mangOne.length] = [];
                mangOne[mangOne.length - 1][0] = address;
                mangOne[mangOne.length - 1][1] = temp.getElementsByTagName("UPSO_NM")[i].childNodes[0].nodeValue;
                searchAddressToCoordinateAndMark(mangOne[mangOne.length - 1][0], mangOne[mangOne.length - 1], false);
              }
              if (address.match('신수')) {
                seoGang[seoGang.length] = [];
                seoGang[seoGang.length - 1][0] = address;
                seoGang[seoGang.length - 1][1] = temp.getElementsByTagName("UPSO_NM")[i].childNodes[0].nodeValue;
                searchAddressToCoordinateAndMark(seoGang[seoGang.length - 1][0], seoGang[seoGang.length - 1], false);
              }
              if (address.match('노고산')) {
                noGoSan[noGoSan.length] = [];
                noGoSan[noGoSan.length - 1][0] = address;
                noGoSan[noGoSan.length - 1][1] = temp.getElementsByTagName("UPSO_NM")[i].childNodes[0].nodeValue;
                searchAddressToCoordinateAndMark(noGoSan[noGoSan.length - 1][0], noGoSan[noGoSan.length - 1], false);
              }
              if (address.match('성산')) {
                sungSan[sungSan.length] = [];
                sungSan[sungSan.length - 1][0] = address;
                sungSan[sungSan.length - 1][1] = temp.getElementsByTagName("UPSO_NM")[i].childNodes[0].nodeValue;
                searchAddressToCoordinateAndMark(sungSan[sungSan.length - 1][0], sungSan[sungSan.length - 1], false);
              }
              if (address.match("중동")) {
                jung[jung.length] = [];
                jung[jung.length - 1][0] = address;
                jung[jung.length - 1][1] = temp.getElementsByTagName("UPSO_NM")[i].childNodes[0].nodeValue;
                searchAddressToCoordinateAndMark(jung[jung.length - 1][0], jung[jung.length - 1], false);
              }
              if (address.match('상암')) {
                sangAm[sangAm.length] = [];
                sangAm[sangAm.length - 1][0] = address;
                sangAm[sangAm.length - 1][1] = temp.getElementsByTagName("UPSO_NM")[i].childNodes[0].nodeValue;
                searchAddressToCoordinateAndMark(sangAm[sangAm.length - 1][0], sangAm[sangAm.length - 1], false);
              }
            }
          }
        }
      }
      request.send();
      setScore();
    }


  </script>

</body>
</html>
